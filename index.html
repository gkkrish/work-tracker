<body>
  <h1>Work Tracker</h1>

  <form id="project-form">
    <input type="text" id="project-name" placeholder="Project name" required />
    <input type="datetime-local" id="project-deadline" required />
    <small id="preview-hint" style="text-align:center; color: #666;">ðŸ“… Pick a date and time</small>
    <button type="submit" class="add-button">Add</button>
  </form>

  <div id="projects"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAMx09CouEAWi_w3MLrLeft4vn2YFCNQvg",
      authDomain: "work-tracker-149ea.firebaseapp.com",
      projectId: "work-tracker-149ea",
      storageBucket: "work-tracker-149ea.appspot.com",
      messagingSenderId: "919883737509",
      appId: "1:919883737509:web:653dfd2866f845219fa04c"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const form = document.getElementById("project-form");
    const projectsDiv = document.getElementById("projects");

    // ðŸ‘‡ Dynamic deadline preview
    const deadlineInput = document.getElementById("project-deadline");
    const previewHint = document.getElementById("preview-hint");

    deadlineInput.addEventListener("input", () => {
      const val = deadlineInput.value;
      if (!val) {
        previewHint.textContent = "ðŸ“… Pick a date and time";
        return;
      }
      const date = new Date(val);
      const options = { weekday: 'short', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
      const formatted = date.toLocaleString(undefined, options);
      previewHint.textContent = `ðŸ•’ Deadline preview: ${formatted}`;
    });

    function formatTimeDiff(deadline) {
      const now = new Date();
      const end = new Date(deadline);
      const diff = end - now;
      const absDiff = Math.abs(diff);

      const days = Math.floor(absDiff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((absDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const mins = Math.floor((absDiff % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((absDiff % (1000 * 60)) / 1000);

      const formatted = `${days}d ${hours}h ${mins}m ${secs}s`;
      return {
        text: diff < 0 ? `${formatted} late` : `${formatted} left`,
        isLate: diff < 0
      };
    }

    async function deleteProject(id) {
      await db.collection("projects").doc(id).delete();
    }

    async function editProject(id, current) {
      const newName = prompt("Edit name:", current.name);
      const newDeadline = prompt("Edit deadline (YYYY-MM-DDTHH:MM):", current.deadline);
      if (newName && newDeadline) {
        await db.collection("projects").doc(id).update({
          name: newName,
          deadline: newDeadline
        });
      }
    }

    function renderProjects(snapshot) {
      projectsDiv.innerHTML = "";
      const docs = snapshot.docs
        .map(doc => ({ id: doc.id, ...doc.data() }))
        .sort((a, b) => new Date(a.deadline) - new Date(b.deadline));

      docs.forEach(proj => {
        const container = document.createElement("div");
        container.className = "project";

        const timeInfo = formatTimeDiff(proj.deadline);
        const info = document.createElement("
